<div class="card-product" id="product-<%= product.id %>">
  <%# Display Product image %>
  <%= link_to product_path(product) do %>
    <% picture_name = product.category.name + ".jpg" %>
    <%= image_tag (product.photo.attached? ? cl_image_path(product.photo.key) : asset_path(picture_name))%>
  <% end %>

  <%# Display Product information %>
  <div class="card-product-infos">
    <div class="card-product-infos-primary">
      <h2><%= product.name.capitalize %></h2>
      <h3><%= product.category.name.capitalize %></h3>
      <p><%= product.user.address %></p>
    </div>
    <div class="card-product-infos-secondary">
      <p><%= product.price %> â‚¬</p>
      <p><%= product.quantity_left %> %</p>
    </div>
  </div>

  <%# Display Bookmark button for buyers %>
  <% if current_user && current_user.not_my_product?(product) %>
    <div class="card-buttons">
      <% bookmark = product.user_bookmark(current_user)  %>
        <% if bookmark %>
          <%= link_to bookmark_path(bookmark), remote: true, method: :delete do %>
            <i class="fa-solid fa-heart"></i>
          <% end %>
        <% else %>
        <%= link_to product_bookmarks_path(product), remote: true, method: :post do %>
          <i class="fa-regular fa-heart"></i>
        <% end %>
      <% end %>
    </div>
  <% end %>

  <%# Display edit and delete button for sellers %>
  <% if current_user && product.user == current_user  %>
    <div class="card-buttons">
      <%= link_to edit_product_path(product) do %>
        <i class="fa-regular fa-pen-to-square"></i>
      <% end %>
      <%= link_to product_path(product), method: :delete, data: { confirm: "Are you sure?" } do %>
        <i class="fa-regular fa-trash-can"></i>
      <% end %>
    </div>
  <% end %>

</div>
